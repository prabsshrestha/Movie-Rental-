{"version":3,"file":"kendo.pivot.fieldmenu.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendopivot","fieldmenu","js","this","$","undefined$1","kendo","window","ui","keys","encode","htmlEncode","MENU","NS","KEYBOARD_NS","PIVOT_SETTING_TARGET_V2","Widget","DOT","COLUMN_FIELDS","FILTER_ITEM","ARIA_LABEL","EXPANSIONPANEL","PivotFieldMenuV2","extend","init","element","options","fn","call","_dataSource","_layout","notify","events","name","animation","expand","effects","duration","collapse","hide","reverse","filter","filterable","sortable","messages","apply","sortAscending","sortDescending","filterFields","include","clear","reset","moveToColumns","moveToRows","movePrevious","moveNext","filterOperatorsDropDownLabel","filterValueTextBoxLabel","operators","contains","doesnotcontain","startswith","endswith","eq","neq","destroy","menu","off","_applyProxy","_resetIncludes","wrapper","treeView","setDataSource","dataSource","_createExpanders","that","expanderOptions","expanded","headerClass","wrapperClass","useBareTemplate","find","title","icon","_getSettingTargets","columnsSettingTarget","parent","data","measuresSettingTarget","rowsSettingTarget","_createTreeView","_includesCache","TreeView","autoBind","_treeViewDataSource","dataTextField","template","item","caption","check","e","dataItem","sender","node","uniqueName","checkboxes","checkChildren","PivotDataSourceV2","create","MENUTEMPLATEV2","ns","renderAll","setting","applyStylesFromKendoAttributes","on","ev","nextFocusable","key","keyCode","focusableElementsSelector","allFocusable","isMenuCurrentlyFocused","_activeElement","currentlyFocused","parents","closest","last","TAB","shiftKey","index","length","removeClass","is","trigger","_moveHover","preventDefault","stopImmediatePropagation","ENTER","target","orientation","showOn","closeOnClick","open","_menuOpen","bind","close","_closeMenu","activate","_activateMenu","deactivate","_deactivateMenu","copyAnchorStyles","_checkActiveProxy","focusedElement","_ariaId","firstItem","first","_initFilterForm","_attachFilterHandlers","_clickHandler","_click","chip","configuratorElement","currentMember","attr","activeElement","_filterOperator","hasClass","HierarchicalDataSource","schema","model","id","hasChildren","parseInt","childrenCardinality","transport","read","catalog","cube","restrictions","fetchOptions","get","nodes","cubeSchema","members","_getFilterStorage","findFilters","member","checked","values","idx","filters","operator","indexOf","map","ftr","value","inArray","checkNodesLocal","success","catalogName","cubeName","command","memberUniqueName","replace","treeOp","levelUniqueName","connection","discover","then","checkNodes","_storeFilterForm","_filterStorage","_filterValue","val","_clearFilterStorage","currentTarget","_sort","_move","_applyIncludesProxy","_applyIncludes","_resetIncludesProxy","_includesHandler","newExpression","view","nonCheckedNodes","removeFilters","logic","nodeIds","push","field","includeLocalExpression","resultExpression","checkedNodes","rootChecked","existingExpression","splice","join","includeExpression","_preventRefresh","checkbox","prop","_checkboxChange","filterForm","filterProxy","_filter","DropDownList","popup","appendTo","document","body","_filterForm","_updateFilterAriaLabel","_reset","selectedOperator","selectedOperatorName","convert","expression","toRemove","removeFilterByValue","_setFilterForm","filterOperator","select","_collapseItems","items","each","ind","el","nextAll","dir","expressions","sort","removeExpr","action","currentMemberIndex","_moveToColumns","_moveToRows","_changeOrder","_updateDisabledState","currentSettingTarget","targetLabel","prev","text","addClass","children","remove","add","move","event","filterBox","schemaCube","_hovered","memberType","toLowerCase","show","_oldCurrentmember","PivotFieldMenu","info","ok","cancel","MENUTEMPLATE","_select","_createWindow","_clearFilters","PivotDataSource","includeWindow","WINDOWTEMPLATE","_closeWindow","Window","visible","resizable","_windowOpen","schemaMembers","done","fail","error","dataBound","progress","not","kendoWindow","center","fields","type","parseFloat","Boolean","parseJSON","result","operatorInUse","isLocal","split","checkState","level","html","renderButton","themeColor","Object","op","MOVE_OPERATIONS_TEMPLATE","MENU_TEMPLATE_FILTERABLE_PARTIAL","LABELMENUTEMPLATE","MENU_TEMPLATE_SORTABLE_PARTIAL","plugin","jQuery"],"sources":["kendo.pivot.fieldmenu.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.pivotgrid.js'), require('kendo.menu.js'), require('kendo.window.js'), require('kendo.treeview.js'), require('kendo.dropdownlist.js'), require('kendo.icons.js'), require('kendo.expansionpanel.js'), require('kendo.html.button.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.pivotgrid', 'kendo.menu', 'kendo.window', 'kendo.treeview', 'kendo.dropdownlist', 'kendo.icons', 'kendo.expansionpanel', 'kendo.html.button'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendopivot = global.kendopivot || {}, global.kendopivot.fieldmenu = global.kendopivot.fieldmenu || {}, global.kendopivot.fieldmenu.js = factory()));\n})(this, (function () {\n    var __meta__ = {\n        id: \"pivot.fieldmenu\",\n        name: \"PivotFieldMenu\",\n        category: \"web\",\n        description: \"The PivotFieldMenu widget allows the user to filter on fields displayed in PivotGrid\",\n        depends: [ \"menu\", \"window\", \"treeview\", \"treeview.draganddrop\", \"dropdownlist\", \"icons\", 'expansionpanel', 'html.button' ],\n        advanced: true\n    };\n\n\n    (function($, undefined$1) {\n        var kendo = window.kendo;\n        var ui = kendo.ui;\n        var keys = kendo.keys;\n        var encode = kendo.htmlEncode;\n        var MENU = \"kendoContextMenu\";\n        var NS = \".kendoPivotFieldMenu\";\n        var KEYBOARD_NS = \".kendoPivotFieldMenuKeyboard\";\n        var PIVOT_SETTING_TARGET_V2 = \"kendoPivotSettingTargetV2\";\n        var Widget = ui.Widget;\n        var DOT = \".\";\n        var CHIP_LIST = \"k-chip-list\";\n        var ROW_FIELDS = \"k-row-fields\";\n        var COLUMN_FIELDS = \"k-column-fields\";\n        var FILTER_ITEM = \"k-filter-item\";\n        var ARIA_LABEL = \"aria-label\",\n        EXPANSIONPANEL = \"kendoExpansionPanel\";\n\n        var PivotFieldMenuV2 = Widget.extend({\n            init: function(element, options) {\n                Widget.fn.init.call(this, element, options);\n\n                this._dataSource();\n\n                this._layout();\n\n                kendo.notify(this);\n            },\n\n            events: [],\n\n            options: {\n                name: \"PivotFieldMenuV2\",\n                animation: {\n                    expand: {\n                        effects: \"expand:vertical\",\n                        duration: 200\n                    },\n                    collapse: {\n                        duration: 200,\n                        effects: \"expand:vertical\",\n                        hide: true,\n                        reverse: true\n                    }\n                },\n                filter: null,\n                filterable: true,\n                sortable: true,\n                messages: {\n                    apply: \"Apply\",\n                    sortAscending: \"Sort Ascending\",\n                    sortDescending: \"Sort Descending\",\n                    filterFields: \"Fields Filter\",\n                    filter: \"Filter\",\n                    include: \"Include Fields...\",\n                    clear: \"Clear\",\n                    reset: \"Reset\",\n                    moveToColumns: \"Move to Columns\",\n                    moveToRows: \"Move to Rows\",\n                    movePrevious: \"Move previous\",\n                    moveNext: \"Move next\",\n                    filterOperatorsDropDownLabel: \"Region Filter Operators\",\n                    filterValueTextBoxLabel: \"Region Filter Value\",\n                    operators: {\n                        contains: \"Contains\",\n                        doesnotcontain: \"Does not contain\",\n                        startswith: \"Starts with\",\n                        endswith: \"Ends with\",\n                        eq: \"Is equal to\",\n                        neq: \"Is not equal to\"\n                    }\n                }\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                if (this.menu) {\n                    this.menu.element.off(NS);\n                    this.menu.element.off(KEYBOARD_NS);\n                    this.menu.destroy();\n                    this.menu = null;\n                    this._applyProxy = this._resetIncludes = null;\n                }\n\n                if (this.wrapper) {\n                    this.wrapper.off(KEYBOARD_NS);\n                }\n\n                if (this.treeView) {\n                    this.treeView.destroy();\n                    this.treeView = null;\n                }\n\n                this.wrapper = null;\n                this.element = null;\n            },\n\n            setDataSource: function(dataSource) {\n                this.options.dataSource = dataSource;\n\n                this._dataSource();\n            },\n\n            _createExpanders: function() {\n                var that = this;\n                var options = that.options;\n                var expanderOptions = {\n                    expanded: false,\n                    headerClass: \"k-columnmenu-item\",\n                    wrapperClass: \"k-item\",\n                    useBareTemplate: true\n                };\n\n                that.wrapper.find(\".k-columns-item\")[EXPANSIONPANEL]($.extend(true, {}, expanderOptions,{\n                    title: kendo.ui.icon(\"grid-layout\") + '<span>' + encode(options.messages.include) + '</span>'\n                }));\n                that.wrapper.find(\".k-column-menu-filter\")[EXPANSIONPANEL]($.extend(true, {}, expanderOptions,{\n                    title: kendo.ui.icon(\"filter\") + '<span>' + encode(options.messages.filterFields) + '</span>'\n                }));\n            },\n\n            _getSettingTargets: function() {\n                this.columnsSettingTarget = this.element.parent().find(DOT + COLUMN_FIELDS).eq(0).data(PIVOT_SETTING_TARGET_V2);\n                this.measuresSettingTarget = this.element.parent().find(DOT + COLUMN_FIELDS).eq(1).data(PIVOT_SETTING_TARGET_V2);\n                this.rowsSettingTarget = this.element.parent().find(DOT + ROW_FIELDS).data(PIVOT_SETTING_TARGET_V2);\n            },\n\n            _createTreeView: function(element) {\n                var that = this;\n\n                that._includesCache = {};\n\n                that.treeView = new ui.TreeView(element, {\n                    autoBind: false,\n                    dataSource: that._treeViewDataSource(),\n                    dataTextField: \"caption\",\n                    template: ({ item }) => `${encode(item.caption || item.name)}`,\n                    check: function(e) {\n                        /* The result can be observed in the DevTools(F12) console of the browser. */\n                        var dataItem = e.sender.dataItem(e.node);\n                        if (that._includesCache[dataItem.uniqueName]) {\n                            delete that._includesCache[dataItem.uniqueName];\n                        } else {\n                            that._includesCache[dataItem.uniqueName] = e.node;\n                        }\n                    },\n                    checkboxes: {\n                        checkChildren: true\n                    }\n                });\n            },\n\n            _dataSource: function() {\n                this.dataSource = kendo.data.PivotDataSourceV2.create(this.options.dataSource);\n            },\n\n            _layout: function() {\n                var that = this;\n                var options = that.options;\n\n                that.wrapper = $(kendo.template(MENUTEMPLATEV2)({\n                    ns: kendo.ns,\n                    filterable: options.filterable,\n                    sortable: options.sortable,\n                    messages: options.messages,\n                    renderAll: options.setting !== \"measures\"\n                }));\n\n                kendo.applyStylesFromKendoAttributes(that.wrapper, [\"overflow\"]);\n                that._createExpanders();\n\n                that.wrapper.on(\"keydown\" + KEYBOARD_NS, function(ev) {\n                    var key = ev.keyCode;\n                    var menu = that.menu;\n                    var focusableElementsSelector = \".k-columnmenu-item:visible,.k-treeview:visible,button.k-button:visible,.k-picker:visible,.k-input input.k-input-inner:visible\";\n                    var allFocusable = that.menu.element.find(focusableElementsSelector);\n                    var isMenuCurrentlyFocused = kendo._activeElement() == that.menu.element[0];\n                    var currentlyFocused = $(kendo._activeElement()).parents(\".k-pivotgrid-column-menu\")[0] == that.menu.element[0] ? $(kendo._activeElement()).closest(focusableElementsSelector) : that.menu.element.find(\".k-focus:not(.k-expander):not(.k-treeview-item)\").last();\n                    var nextFocusable;\n\n                    if (key == keys.TAB) {\n                        if (ev.shiftKey) {\n                            nextFocusable = allFocusable.eq(currentlyFocused[0] ? (allFocusable.index(currentlyFocused) + allFocusable.length - 1) % allFocusable.length : 0);\n                        } else {\n                            nextFocusable = allFocusable.eq(currentlyFocused[0] ? (allFocusable.index(currentlyFocused) + 1) % allFocusable.length : 0);\n                        }\n\n                        menu.element.find(\".k-focus\").removeClass(\"k-focus\");\n                        if (nextFocusable.is(\".k-item\")) {\n                            if (!isMenuCurrentlyFocused) {\n                                menu.element.trigger(\"focus\");\n                            }\n\n                            // fix for the incorrectly focused popup element instead of first item\n                            // due to custom templates used\n                            menu.element.find(\".k-focus\").removeClass(\"k-focus\");\n                            menu._moveHover(currentlyFocused, nextFocusable);\n                        } else {\n                            nextFocusable.trigger(\"focus\");\n                        }\n\n                        ev.preventDefault();\n                        ev.stopImmediatePropagation();\n                    } else if (key == keys.ENTER) {\n                        currentlyFocused.trigger(\"click\");\n                        ev.preventDefault();\n                        ev.stopImmediatePropagation();\n                    }\n                });\n\n                that.menu = that.wrapper[MENU]({\n                    filter: options.filter,\n                    target: that.element,\n                    orientation: \"vertical\",\n                    showOn: \"click\",\n                    closeOnClick: false,\n                    open: this._menuOpen.bind(this),\n                    close: this._closeMenu.bind(this),\n                    activate: this._activateMenu.bind(this),\n                    deactivate: this._deactivateMenu.bind(this),\n                    copyAnchorStyles: false\n                }).data(MENU);\n\n                that.menu.element.off(\"blur.kendoMenu\", \"[tabindex]\", that.menu._checkActiveProxy);\n                // fix to focus the first item instead of the popup element\n                that.menu.element.on(\"focus\" + KEYBOARD_NS, function(ev) {\n                    var focusedElement = $(`#${that.menu._ariaId}`);\n                    if (focusedElement.is(\".k-pivotgrid-column-menu-popup\")) {\n                        if (that.menu.element.find(\".k-columnmenu-item:visible\").length) {\n                            var firstItem = that.menu.element.find(\".k-columnmenu-item:visible\").first();\n                            that.menu._moveHover(focusedElement, firstItem);\n                        }\n                    }\n                });\n\n                if (options.filterable) {\n                    that._initFilterForm();\n                    that._attachFilterHandlers();\n                    that._createTreeView(that.wrapper.find(\".k-treeview\"));\n                }\n\n                that._clickHandler = that._click.bind(that);\n                that.wrapper.on(\"click\", \".k-item:not([role='treeitem'])\", that._clickHandler);\n            },\n\n            _activateMenu: function(e) {\n                var that = this;\n                if (that.menu.element.find(\".k-columnmenu-item:visible\").length) {\n                    var firstItem = that.menu.element.find(\".k-columnmenu-item:visible\").first();\n                    that.menu._moveHover([], firstItem);\n                }\n            },\n\n            _deactivateMenu: function(e) {\n                var that = this,\n                    chip = that.menu.target.find(\"[tabindex=0]\"),\n                    configuratorElement = that.element.parent();\n\n                if (!chip.length) {\n                    chip = configuratorElement.find(`.k-chip:contains(\"${that.currentMember}\")`);\n                    chip.attr(\"tabindex\", 0);\n                }\n\n                // focus the chip instead of the chiplist\n                chip.trigger(\"focus\");\n            },\n\n            _closeMenu: function(e) {\n                var that = this;\n                var activeElement = $(kendo._activeElement());\n\n                if (!that.options.filterable) {\n                    return;\n                }\n\n                if (activeElement[0] === this._filterOperator.wrapper[0] || activeElement.closest(\".k-treeview\")[0] === that.treeView.wrapper[0] ||\n                    activeElement.hasClass(\"k-button-includes-reset\")) {\n                    e.preventDefault();\n                }\n            },\n\n            _treeViewDataSource: function() {\n                var that = this;\n\n                return kendo.data.HierarchicalDataSource.create({\n                    schema: {\n                        model: {\n                            id: \"uniqueName\",\n                            hasChildren: function(item) {\n                                return parseInt(item.childrenCardinality, 10) > 0;\n                            }\n                        }\n                    },\n                    transport: {\n                        read: function(options) {\n                            var node = that.treeView.dataSource.get(options.data.uniqueName);\n                            var name = options.data.uniqueName;\n                            var nodes = [];\n                            var filter;\n                            var skipCheck;\n                            var catalog;\n                            var cube;\n                            var restrictions;\n                            var fetchOptions;\n\n                            if (that.dataSource.cubeSchema) {\n                                if (!name) {\n                                    nodes = that.dataSource.cubeSchema.members(that.currentMember + \".[(ALL)]\");\n                                } else {\n                                    nodes = that.dataSource.cubeSchema.members(that.currentMember);\n                                }\n\n                                filter = that.dataSource.filter();\n                                skipCheck = that._getFilterStorage(that.currentMember) && findFilters({ filter: filter, member: that.currentMember }).length == 1;\n\n                                if (skipCheck && !name) {\n                                    nodes[0].checked = true;\n                                } else {\n                                    checkNodesLocal(that.dataSource.filter(), that.currentMember, nodes);\n                                }\n                                options.success(nodes);\n                            } else {\n                                catalog = that.dataSource.transport.catalog();\n                                cube = that.dataSource.transport.cube();\n                                restrictions = {\n                                    catalogName: catalog,\n                                    cubeName: cube\n                                };\n                                fetchOptions = {\n                                    command: 'schemaMembers'\n                                };\n\n                                if (!name) {\n                                    restrictions.levelUniqueName = that.currentMember + \".[(ALL)]\";\n                                } else {\n                                    restrictions.memberUniqueName = node.uniqueName.replace(/\\&/g, \"&amp;\");\n                                    restrictions.treeOp = 1;\n                                }\n\n                                fetchOptions.connection = {\n                                    catalog: catalog,\n                                    cube: cube\n                                };\n\n                                fetchOptions.restrictions = restrictions;\n                                that.dataSource.discover(fetchOptions).then(\n                                    function(data) {\n                                        if (!node || node.checked) {\n                                            checkNodes(that.dataSource.filter(), that.currentMember, data);\n                                        }\n\n                                        options.success(data);\n                                    });\n                            }\n                        }\n                    }\n                });\n            },\n\n            _storeFilterForm: function(member) {\n                var that = this;\n\n                if (!that._filterStorage) {\n                    that._filterStorage = {};\n                }\n\n                that._filterStorage[member] = {\n                    value: that._filterValue.val(),\n                    operator: that._filterOperator.value()\n                };\n            },\n\n            _getFilterStorage: function(member) {\n                if (!this._filterStorage || !this._filterStorage[member]) {\n                    return null;\n                }\n                return this._filterStorage[member];\n            },\n\n            _clearFilterStorage: function(member) {\n                this._filterStorage[member] = null;\n            },\n\n            _click: function(e) {\n                var item = $(e.currentTarget).closest(\":not(path,svg)\");\n\n                if (item.hasClass(\"k-columnmenu-item\") && item.find(\".k-i-sort-asc-small,.k-svg-i-sort-asc-small\").length) {\n                    this._sort(\"asc\");\n                }\n\n                if (item.hasClass(\"k-columnmenu-item\") && item.find(\".k-i-sort-desc-small,.k-svg-i-sort-desc-small\").length) {\n                    this._sort(\"desc\");\n                }\n\n                if (item.hasClass(\"k-columnmenu-item\") && item.find(\".k-i-columns,.k-svg-i-columns\").length) {\n                    this._move(\"columns\");\n                }\n\n                if (item.hasClass(\"k-columnmenu-item\") && item.find(\".k-i-rows,.k-svg-i-rows\").length) {\n                    this._move(\"rows\");\n                }\n\n                if (item.hasClass(\"k-columnmenu-item\") && item.find(\".k-i-arrow-left,.k-svg-i-arrow-left\").length) {\n                    this._move(\"previous\");\n                }\n\n                if (item.hasClass(\"k-columnmenu-item\") && item.find(\".k-i-arrow-right,.k-svg-i-arrow-right\").length) {\n                    this._move(\"next\");\n                }\n            },\n\n            _attachFilterHandlers: function() {\n                this._applyIncludesProxy = this._applyIncludes.bind(this);\n                this._resetIncludesProxy = this._resetIncludes.bind(this);\n\n                this.menu.element\n                    .on(\"click\" + NS, \".k-button-includes-reset\", this._resetIncludesProxy)\n                    .on(\"click\" + NS, \".k-button-includes-apply\", this._applyIncludesProxy);\n            },\n\n            _includesHandler: function(e) {\n                e.preventDefault();\n                if ($(e.target).closest(\":not(path,svg)\").hasClass(\"k-button-includes-reset\")) {\n                    this._resetIncludes();\n                } else {\n                    this._applyIncludes();\n                }\n            },\n\n            _applyIncludes: function(e) {\n                e.preventDefault();\n                var view = this.treeView.dataSource.view();\n                var filter = this.dataSource.filter();\n                var newExpression;\n                if (this.dataSource.cubeSchema) {\n                    newExpression = includeLocalExpression(view, filter, this.currentMember);\n                } else {\n                    newExpression = includeExpression(view, filter, this.currentMember);\n                }\n                 this._includesCache = {};\n\n                if (newExpression) {\n                    this.dataSource._preventRefresh = true;\n                    this.dataSource.filter(newExpression);\n                    this.menu.close();\n                }\n            },\n\n            _resetIncludes: function(e) {\n                e.preventDefault();\n\n                var that = this;\n                var checkbox;\n\n                for (var item in that._includesCache) {\n                    checkbox = $(that._includesCache[item]).find(\".k-checkbox\");\n                    checkbox.prop(\"checked\", !checkbox.prop(\"checked\"));\n                    that.treeView._checkboxChange({ target: checkbox });\n                    delete that._includesCache[item];\n                }\n            },\n\n            _initFilterForm: function() {\n                var filterForm = this.menu.element.find(\".kendo-grid-filter-menu-container\");\n                var filterProxy = this._filter.bind(this);\n\n                this._filterOperator = new kendo.ui.DropDownList(filterForm.find(\"select\"), { popup: { appendTo: document.body } });\n                this._filterValue = filterForm.find(\"input.k-input-inner\");\n                this._filterForm = filterForm;\n                this._updateFilterAriaLabel();\n\n                filterForm\n                    .on(\"click\" + NS, \".k-button-filter\", filterProxy)\n                    .on(\"click\" + NS, \".k-button-filter-clear\", this._reset.bind(this));\n            },\n\n            _updateFilterAriaLabel: function() {\n                var selectedOperator = this._filterOperator.value();\n                var selectedOperatorName = this.options.messages.operators[selectedOperator];\n\n                this._filterForm.find(\"select\").attr(ARIA_LABEL, selectedOperatorName);\n            },\n\n            _filter: function(e) {\n                var that = this;\n                var value = convert(that._filterValue.val(), that.dataSource, that.currentMember);\n                var filter = that.dataSource.filter();\n\n                e.preventDefault();\n\n                if (value === \"\") {\n                    that.menu.close();\n                    return;\n                }\n\n                var expression = {\n                    field: that.currentMember,\n                    operator: that._filterOperator.value(),\n                    value: value\n                };\n                if (filter) {\n                    removeFilterByValue(filter, that._getFilterStorage(that.currentMember));\n                } else {\n                    filter = { logic: 'and', filters: [] };\n                }\n\n                that._storeFilterForm(that.currentMember);\n                filter.filters.push(expression);\n\n                that.dataSource._preventRefresh = true;\n                that.dataSource.filter(filter);\n                that.menu.close();\n            },\n\n            _reset: function(e) {\n                var that = this;\n                var filter = that.dataSource.filter();\n                removeFilters(filter, that.currentMember);\n\n                e.preventDefault();\n\n                if (!filter.filters[0]) {\n                    filter = {};\n                }\n\n                that.dataSource._preventRefresh = true;\n                that.dataSource.filter(filter);\n                that._clearFilterStorage(that.currentMember);\n                that._setFilterForm(null);\n                that.menu.close();\n            },\n\n            _setFilterForm: function(expression) {\n                var filterOperator = this._filterOperator;\n                var operator = \"\";\n                var value = \"\";\n\n                if (expression) {\n                    operator = expression.operator;\n                    value = expression.value;\n                }\n\n                filterOperator.value(operator);\n                if (!filterOperator.value()) {\n                    filterOperator.select(0);\n                }\n\n                this._filterValue.val(value);\n            },\n\n            _collapseItems: function(items) {\n                items.find(\".k-expander-indicator span\").each((ind,el) => kendo.ui.icon($(el), { icon: \"chevron-up\" }));\n\n                items.nextAll().hide();\n            },\n\n            _sort: function(dir) {\n                var field = this.currentMember;\n                var expressions = (this.dataSource.sort() || []);\n\n                expressions = removeExpr(expressions, field);\n                expressions.push({\n                    field: field,\n                    dir: dir\n                });\n\n                this.dataSource._preventRefresh = true;\n                this.dataSource.sort(expressions);\n                this.menu.close();\n            },\n\n            _move: function(action) {\n                var that = this,\n                    index = that.currentMemberIndex;\n\n                switch (action) {\n                    case \"columns\":\n                        that._moveToColumns();\n                        break;\n                    case \"rows\":\n                        that._moveToRows();\n                        break;\n                    case \"previous\":\n                        that._changeOrder(--index);\n                        break;\n                    case \"next\":\n                        that._changeOrder(++index);\n                        break;\n                }\n\n                that.menu.close();\n            },\n\n            _updateDisabledState: function() {\n                var that = this,\n                    menu = that.menu.element,\n                    target = that.currentSettingTarget.element,\n                    targetLabel = target.prev().text();\n\n                menu.find(\".k-columnmenu-item.k-disabled\").removeClass(\"k-disabled\");\n\n                if (that.currentMemberIndex === 0) {\n                    menu.find('[data-move=\"previous\"]').closest(\".k-columnmenu-item\").addClass(\"k-disabled\");\n                }\n\n                if (that.currentMemberIndex === target.children().length - 1) {\n                    menu.find('[data-move=\"next\"]').closest(\".k-columnmenu-item\").addClass(\"k-disabled\");\n                }\n\n                if (targetLabel === \"Columns\") {\n                    menu.find('[data-move=\"columns\"]').closest(\".k-columnmenu-item\").addClass(\"k-disabled\");\n                }\n\n                if (targetLabel === \"Rows\") {\n                    menu.find('[data-move=\"rows\"]').closest(\".k-columnmenu-item\").addClass(\"k-disabled\");\n                }\n            },\n\n            _moveToColumns: function() {\n                var that = this,\n                    currentMember = that.currentMember;\n\n                that.rowsSettingTarget.remove(currentMember);\n                that.columnsSettingTarget.add(currentMember);\n            },\n\n            _moveToRows: function() {\n                var that = this,\n                    currentMember = that.currentMember;\n\n                that.columnsSettingTarget.remove(currentMember);\n                that.rowsSettingTarget.add(currentMember);\n            },\n\n            _changeOrder: function(index) {\n                var that = this,\n                    currentMember = that.currentMember;\n\n                this.currentSettingTarget.move(currentMember, index);\n            },\n\n            _menuOpen: function(e) {\n                if (!e.event) {\n                    return;\n                }\n\n                var that = this;\n                var schemaCube = that.dataSource.cubeSchema;\n                var filterBox;\n                var member = $(e.event.target).closest(\".k-chip\");\n                that.currentMember = member.text();\n                that.currentMemberIndex = member.index();\n                that.currentSettingTarget = member.closest(DOT + CHIP_LIST).data(PIVOT_SETTING_TARGET_V2);\n                that.menu.popup._hovered = true;\n\n                that._getSettingTargets();\n                that._updateDisabledState();\n\n                if (that.options.filterable) {\n                    that._setFilterForm(that._getFilterStorage(that.currentMember));\n                    filterBox = that.wrapper.find(\".k-columnmenu-item-wrapper\").last();\n                    if (schemaCube && schemaCube.memberType(that.currentMember).toLowerCase() !== \"string\") {\n                        filterBox.hide();\n                    } else {\n                        filterBox.show();\n                    }\n                    if (that.currentMember !== that._oldCurrentmember) {\n                        if (that._oldCurrentmember) {\n                            that._collapseItems(that.menu.element.find(\".k-item.k-expander\"));\n                        }\n                        that._oldCurrentmember = that.currentMember;\n                        that._includesCache = {};\n                        this.treeView.dataSource.read();\n                    }\n                }\n            },\n        });\n\n        var PivotFieldMenu = Widget.extend({\n            init: function(element, options) {\n                Widget.fn.init.call(this, element, options);\n\n                this._dataSource();\n\n                this._layout();\n\n                kendo.notify(this);\n            },\n\n            events: [],\n\n            options: {\n                name: \"PivotFieldMenu\",\n                filter: null,\n                filterable: true,\n                sortable: true,\n                messages: {\n                    info: \"Show items with value that:\",\n                    sortAscending: \"Sort Ascending\",\n                    sortDescending: \"Sort Descending\",\n                    filterFields: \"Fields Filter\",\n                    filter: \"Filter\",\n                    include: \"Include Fields...\",\n                    title: \"Fields to include\",\n                    clear: \"Clear\",\n                    ok: \"OK\",\n                    cancel: \"Cancel\",\n                    operators: {\n                        contains: \"Contains\",\n                        doesnotcontain: \"Does not contain\",\n                        startswith: \"Starts with\",\n                        endswith: \"Ends with\",\n                        eq: \"Is equal to\",\n                        neq: \"Is not equal to\"\n                    }\n                }\n            },\n\n            _layout: function() {\n                var options = this.options;\n\n                this.wrapper = $(kendo.template(MENUTEMPLATE)({\n                    ns: kendo.ns,\n                    filterable: options.filterable,\n                    sortable: options.sortable,\n                    messages: options.messages\n                }));\n\n                this.menu = this.wrapper[MENU]({\n                    filter: options.filter,\n                    target: this.element,\n                    orientation: \"vertical\",\n                    showOn: \"click\",\n                    closeOnClick: false,\n                    open: this._menuOpen.bind(this),\n                    select: this._select.bind(this),\n                    copyAnchorStyles: false\n                }).data(MENU);\n\n                this._createWindow();\n\n                if (options.filterable) {\n                    this._initFilterForm();\n                }\n            },\n\n            _initFilterForm: function() {\n                var filterForm = this.menu.element.find(\".\" + FILTER_ITEM);\n                var filterProxy = this._filter.bind(this);\n\n                this._filterOperator = new kendo.ui.DropDownList(filterForm.find(\"select\"));\n                this._filterValue = filterForm.find(\"input.k-input-inner\");\n                this._updateFilterAriaLabel();\n\n                filterForm\n                    .on(\"submit\" + NS, filterProxy)\n                    .on(\"click\" + NS, \".k-button-filter\", filterProxy)\n                    .on(\"click\" + NS, \".k-button-clear\", this._reset.bind(this));\n            },\n\n            _setFilterForm: function(expression) {\n                var filterOperator = this._filterOperator;\n                var operator = \"\";\n                var value = \"\";\n\n                if (expression) {\n                    operator = expression.operator;\n                    value = expression.value;\n                }\n\n                filterOperator.value(operator);\n                if (!filterOperator.value()) {\n                    filterOperator.select(0);\n                }\n\n                this._filterValue.val(value);\n            },\n\n            _clearFilters: function(member) {\n                var filter = this.dataSource.filter() || {};\n                var expressions;\n                var idx = 0;\n                var length;\n\n                filter.filters = filter.filters || [];\n                expressions = findFilters({ filter: filter, member: member });\n\n                for (length = expressions.length; idx < length; idx++) {\n                    filter.filters.splice(filter.filters.indexOf(expressions[idx]), 1);\n                }\n\n                return filter;\n            },\n\n            _filter: function(e) {\n                var that = this;\n                var value = convert(that._filterValue.val(), that.dataSource, that.currentMember);\n\n                e.preventDefault();\n\n                if (value === \"\") {\n                    that.menu.close();\n                    return;\n                }\n\n                var expression = {\n                    field: that.currentMember,\n                    operator: that._filterOperator.value(),\n                    value: value\n                };\n                var filter = that._clearFilters(that.currentMember);\n\n                filter.filters.push(expression);\n\n                that.dataSource.filter(filter);\n                that.menu.close();\n            },\n\n            _updateFilterAriaLabel: function() {\n                var filterForm = this.menu.element.find(\".\" + FILTER_ITEM);\n                var selectedOperator = this._filterOperator.value();\n                var selectedOperatorName = this.options.messages.operators[selectedOperator];\n\n                filterForm.find(\"select\").attr(ARIA_LABEL, selectedOperatorName);\n            },\n\n            _reset: function(e) {\n                var that = this;\n                var filter = that._clearFilters(that.currentMember);\n\n                e.preventDefault();\n\n                if (!filter.filters[0]) {\n                    filter = {};\n                }\n\n                that.dataSource.filter(filter);\n                that._setFilterForm(null);\n                that.menu.close();\n            },\n\n            _sort: function(dir) {\n                var field = this.currentMember;\n                var expressions = (this.dataSource.sort() || []);\n\n                expressions = removeExpr(expressions, field);\n                expressions.push({\n                    field: field,\n                    dir: dir\n                });\n\n                this.dataSource.sort(expressions);\n                this.menu.close();\n            },\n\n            setDataSource: function(dataSource) {\n                this.options.dataSource = dataSource;\n\n                this._dataSource();\n            },\n\n            _dataSource: function() {\n                this.dataSource = kendo.data.PivotDataSource.create(this.options.dataSource);\n            },\n\n            _createWindow: function() {\n                var messages = this.options.messages;\n\n                this.includeWindow = $(kendo.template(WINDOWTEMPLATE)({\n                    messages: messages\n                }))\n                .on(\"click\" + NS, \".k-button-ok\", this._applyIncludes.bind(this))\n                .on(\"click\" + NS, \".k-button-cancel\", this._closeWindow.bind(this));\n\n                this.includeWindow = new ui.Window(this.includeWindow, {\n                    title: messages.title,\n                    visible: false,\n                    resizable: false,\n                    open: this._windowOpen.bind(this)\n                });\n            },\n\n            _applyIncludes: function(e) {\n                var checkedNodes = [];\n                var resultExpression;\n                var view = this.treeView.dataSource.view();\n                var rootChecked = view[0].checked;\n                var filter = this.dataSource.filter();\n                var existingExpression = findFilters({ filter: filter, member: this.currentMember, operator: \"in\" })[0];\n\n                nodeIds(view, checkedNodes, true);\n\n                if (existingExpression) {\n                    if (rootChecked) {\n                        filter.filters.splice(filter.filters.indexOf(existingExpression), 1);\n                        if (!filter.filters.length) {\n                            filter = {};\n                        }\n                    } else {\n                        existingExpression.value = checkedNodes.join(\",\");\n                    }\n\n                    resultExpression = filter;\n                }\n\n                if (checkedNodes.length) {\n                    if (!resultExpression && !rootChecked) {\n                        resultExpression = {\n                            field: this.currentMember,\n                            operator: \"in\",\n                            value: checkedNodes.join(\",\")\n                        };\n\n                        if (filter) {\n                            filter.filters.push(resultExpression);\n                            resultExpression = filter;\n                        }\n                    }\n                }\n\n                if (resultExpression) {\n                    this.dataSource.filter(resultExpression);\n                }\n\n                this._closeWindow(e);\n            },\n\n            _closeWindow: function(e) {\n                e.preventDefault();\n\n                this.includeWindow.close();\n            },\n\n            _treeViewDataSource: function() {\n                var that = this;\n\n                return kendo.data.HierarchicalDataSource.create({\n                    schema: {\n                        model: {\n                            id: \"uniqueName\",\n                            hasChildren: function(item) {\n                                return parseInt(item.childrenCardinality, 10) > 0;\n                            }\n                        }\n                    },\n                    transport: {\n                        read: function(options) {\n                            var restrictions = {};\n                            var node = that.treeView.dataSource.get(options.data.uniqueName);\n                            var name = options.data.uniqueName;\n\n                            if (!name) {\n                                restrictions.levelUniqueName = that.currentMember + \".[(ALL)]\";\n                            } else {\n                                restrictions.memberUniqueName = node.uniqueName.replace(/\\&/g, \"&amp;\");\n                                restrictions.treeOp = 1;\n                            }\n\n                            that.dataSource\n                                .schemaMembers(restrictions)\n                                .done(function(data) {\n                                    checkNodes(that.dataSource.filter(), that.currentMember, data);\n\n                                    options.success(data);\n                                })\n                                .fail(options.error);\n                        }\n                    }\n                });\n            },\n\n            _createTreeView: function(element) {\n                var that = this;\n\n                that.treeView = new ui.TreeView(element, {\n                    autoBind: false,\n                    dataSource: that._treeViewDataSource(),\n                    dataTextField: \"caption\",\n                    template: ({ item }) => `${encode(item.caption || item.name)}`,\n                    checkboxes: {\n                        checkChildren: true\n                    },\n                    dataBound: function() {\n                        ui.progress(that.includeWindow.element, false);\n                    }\n                });\n            },\n\n            _menuOpen: function(e) {\n                if (!e.event) {\n                    return;\n                }\n\n                var attr = kendo.attr(\"name\");\n\n                this.currentMember = $(e.event.target).closest(\"[\" + attr + \"]\").attr(attr);\n\n                if (this.options.filterable) {\n                    this._setFilterForm(findFilters({ filter: this.dataSource.filter(), member: this.currentMember })[0]);\n                }\n            },\n\n            _select: function(e) {\n                var item = $(e.item);\n\n                $(\".k-pivot-filter-window\").not(this.includeWindow.element).kendoWindow(\"close\");\n\n                if (item.hasClass(\"k-include-item\")) {\n                    this.includeWindow.center().open();\n                } else if (item.hasClass(\"k-sort-asc\")) {\n                    this._sort(\"asc\");\n                } else if (item.hasClass(\"k-sort-desc\")) {\n                    this._sort(\"desc\");\n                } else if (item.hasClass(FILTER_ITEM)) {\n                    this._updateFilterAriaLabel();\n                }\n            },\n\n            _windowOpen: function() {\n                if (!this.treeView) {\n                    this._createTreeView(this.includeWindow.element.find(\".k-treeview\"));\n                }\n\n                ui.progress(this.includeWindow.element, true);\n                this.treeView.dataSource.read();\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                if (this.menu) {\n                    this.menu.destroy();\n                    this.menu = null;\n                }\n\n                if (this.treeView) {\n                    this.treeView.destroy();\n                    this.treeView = null;\n                }\n\n                if (this.includeWindow) {\n                    this.includeWindow.destroy();\n                    this.includeWindow = null;\n                }\n\n                this.wrapper = null;\n                this.element = null;\n            }\n        });\n\n        function convert(value, dataSource, currentMember) {\n            var schema = dataSource.options.schema;\n            var field = ((schema.model || {}).fields || {})[currentMember];\n\n            if (field) {\n                if (field.type === \"number\") {\n                    value = parseFloat(value);\n                } else if (field.type === \"boolean\") {\n                    value = Boolean($.parseJSON(value));\n                }\n            }\n\n            return value;\n        }\n\n        function removeExpr(expressions, name) {\n            var result = [];\n\n            for (var idx = 0, length = expressions.length; idx < length; idx++) {\n                if (expressions[idx].field !== name) {\n                    result.push(expressions[idx]);\n                }\n            }\n\n            return result;\n        }\n\n        function removeFilterByValue(filter, toRemove) {\n            if (!toRemove) {\n                return;\n            }\n\n            filter = filter.filters;\n\n            var idx = 0;\n            var length = filter.length;\n\n            for (idx = length - 1; idx >= 0; idx--) {\n                if (filter[idx].value === toRemove.value && filter[idx].operator === toRemove.operator) {\n                    filter.splice(idx, 1);\n                }\n            }\n        }\n\n        function removeFilters(filter, member, operator) {\n            if (!filter) {\n                return;\n            }\n\n            filter = filter.filters;\n\n            var idx = 0;\n            var length = filter.length;\n            var filterOperator;\n\n            for (idx = length - 1; idx >= 0; idx--) {\n                filterOperator = filter[idx].operator;\n\n                if ((operator ? filterOperator === operator : true) && filter[idx].field === member) {\n                    filter.splice(idx, 1);\n                }\n            }\n        }\n\n        function findFilters(options) {\n            if (!options.filter) {\n                return [];\n            }\n\n            var filter = options.filter.filters;\n            var idx = 0;\n            var result = [];\n            var length = filter.length;\n            var filterOperator;\n            var operatorInUse = options.isLocal ? \"neq\" : \"in\";\n\n            for ( ; idx < length; idx++) {\n                filterOperator = filter[idx].operator;\n\n                if (((!options.operator && filterOperator !== operatorInUse) || (filterOperator === options.operator)) && filter[idx].field === options.member) {\n                    result.push(filter[idx]);\n                }\n            }\n\n            return result;\n        }\n\n        function checkNodesLocal(filter, member, nodes) {\n            var values, idx = 0, length = nodes.length;\n            var filters = findFilters({ filter: filter, member: member, operator: \"neq\" });\n\n            if (nodes[0].name.indexOf(\"[(ALL)]\") >= 0) {\n                nodes[0].checked = !filters.length;\n                return;\n            }\n\n            if (!filters.length) {\n                for (; idx < length; idx++) {\n                    nodes[idx].checked = true;\n                }\n            } else {\n                values = filters.map(function(ftr) { return ftr.value; });\n                for (; idx < length; idx++) {\n                    nodes[idx].checked = $.inArray(nodes[idx].uniqueName, values) < 0;\n                }\n            }\n        }\n\n        function checkNodes(filter, member, nodes) {\n            var values, idx = 0, length = nodes.length;\n            filter = findFilters({ filter: filter, member: member, operator: \"in\" })[0];\n\n            if (!filter) {\n                for (; idx < length; idx++) {\n                    nodes[idx].checked = true;\n                }\n            } else {\n                values = filter.value.split(\",\");\n                for (; idx < length; idx++) {\n                    nodes[idx].checked = $.inArray(nodes[idx].uniqueName, values) >= 0;\n                }\n            }\n        }\n\n        function nodeIds(nodes, checkedNodes, checkState) {\n            var idx, length = nodes.length;\n\n            for (idx = 0; idx < length; idx++) {\n                if (nodes[idx].checked === checkState && nodes[idx].level() !== 0) {\n                    checkedNodes.push(nodes[idx].uniqueName);\n                }\n\n                if (nodes[idx].hasChildren) {\n                    nodeIds(nodes[idx].children.view(), checkedNodes, checkState);\n                }\n            }\n        }\n\n        function includeLocalExpression(view, filter, currentMember) {\n            var nonCheckedNodes = [];\n            removeFilters(filter, currentMember, \"neq\");\n\n            if (!filter) {\n                filter = { logic: 'and', filters: [] };\n            }\n            nodeIds(view, nonCheckedNodes, false);\n\n            if (nonCheckedNodes.length) {\n                for (var idx = 0; idx < nonCheckedNodes.length; idx++) {\n                    filter.filters.push({\n                        field: currentMember,\n                        operator: \"neq\",\n                        value: nonCheckedNodes[idx]\n                    });\n                }\n            }\n\n            return filter ? filter : null;\n        }\n\n        function includeExpression(view, filter, currentMember) {\n            var checkedNodes = [];\n            var resultExpression;\n            var rootChecked = view[0].checked;\n            var existingExpression = findFilters({ filter: filter, member: currentMember, operator: \"in\" })[0];\n\n            nodeIds(view, checkedNodes, true);\n\n            if (existingExpression) {\n                if (rootChecked) {\n                    filter.filters.splice(filter.filters.indexOf(existingExpression), 1);\n                    if (!filter.filters.length) {\n                        filter = {};\n                    }\n                } else {\n                    existingExpression.value = checkedNodes.join(\",\");\n                }\n\n                resultExpression = filter;\n            }\n\n            if (checkedNodes.length) {\n                if (!resultExpression && !rootChecked) {\n                    resultExpression = {\n                        field: currentMember,\n                        operator: \"in\",\n                        value: checkedNodes.join(\",\")\n                    };\n\n                    if (filter) {\n                        filter.filters.push(resultExpression);\n                        resultExpression = filter;\n                    }\n                }\n            }\n\n            return resultExpression ? resultExpression : null;\n        }\n\n        var LABELMENUTEMPLATE = (messages) =>\n            '<div class=\"k-filterable k-content\" tabindex=\"-1\" data-role=\"fieldmenu\">' +\n                '<form class=\"k-filter-menu\">' +\n                    '<div class=\"k-filter-menu-container\">' +\n                        `<div class=\"k-filter-help-text\">${encode(messages.info)}</div>` +\n                        '<select>' +\n                            `${Object.keys(messages.operators || {}).map(op => '<option value=\"' + op + '\">' + encode(messages.operators[op]) + '</option>').join(\"\")}` +\n                        '</select>' +\n                        `<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input class=\"k-input-inner\" type=\"text\" ${ARIA_LABEL}=\"${messages.filter}\" title=\"${messages.filter}\" /></span>` +\n                        '<div class=\"k-actions\">' +\n                            `<a class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary k-button-filter\" href=\"#\"><span class=\"k-button-text\">${encode(messages.filter)}</span></a>` +\n                            `<a class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-button-clear\" href=\"#\"><span class=\"k-button-text\">${encode(messages.clear)}</span></a>` +\n                        '</div>' +\n                    '</div>' +\n                '</form>' +\n            '</div>';\n\n        var MENUTEMPLATEV2 = ({ messages, sortable, filterable, renderAll }) =>\n            '<div class=\"k-pivotgrid-column-menu k-column-menu k-popup k-child-animation-container\">' +\n                '<div class=\"k-pivotgrid-column-menu-popup k-grid-columnmenu-popup\">' +\n                    '<div>' +\n                        (sortable && renderAll ? '<div class=\"k-columnmenu-item-wrapper\">' +\n                            '<div class=\"k-columnmenu-item k-item\">' +\n                                `${kendo.ui.icon(\"sort-asc-small\")}${encode(messages.sortAscending)}` +\n                            '</div>' +\n                            '<div class=\"k-columnmenu-item k-item\">' +\n                                `${kendo.ui.icon(\"sort-desc-small\")}${encode(messages.sortDescending)}` +\n                            '</div>' +\n                        '</div>' : '') +\n                        (filterable && renderAll ? '<div class=\"k-columnmenu-item-wrapper\">' +\n                            '<div class=\"k-columnmenu-item-content k-columns-item\">' +\n                                '<div class=\"k-column-list-wrapper\">' +\n                                    '<div class=\"k-column-list\">' +\n                                        '<div class=\"k-treeview\">' +\n                                        '</div>' +\n                                    '</div>' +\n                                '</div>' +\n                                '<div class=\"k-columnmenu-actions\">' +\n                                    kendo.html.renderButton(`<button class=\"k-button-includes-reset\">${encode(messages.reset)}</button>`) +\n                                    kendo.html.renderButton(`<button class=\"k-button-includes-apply\">${encode(messages.apply)}</button>`, { themeColor: \"primary\" }) +\n                                '</div>' +\n                            '</div>' +\n                        '</div>' : '') +\n                        (filterable && renderAll ? '<div class=\"k-columnmenu-item-wrapper\">' +\n                            '<div class=\"k-columnmenu-item-content k-column-menu-filter\">' +\n                                '<div class=\"kendo-grid-filter-menu-container\">' +\n                                    '<form class=\"k-filter-menu k-group k-reset\">' +\n                                        '<div class=\"k-filter-menu-container\">' +\n                                                `<select class=\"k-dropdown k-picker k-dropdown-list\" ${ARIA_LABEL}=\"${messages.filterOperatorsDropDownLabel}\" ${kendo.attr(\"style-overflow\")}=\"visible\">` +\n                                                    `${Object.keys(messages.operators || {}).map(op => '<option value=\"' + op + '\">' + encode(messages.operators[op]) + '</option>').join(\"\")}` +\n                                                '</select>' +\n                                                `<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input class=\"k-input-inner\" ${ARIA_LABEL}=\"${messages.filterValueTextBoxLabel}\" value=\"\"></span>` +\n                                            '<div class=\"k-actions k-hstack k-justify-content-stretch\">' +\n                                                kendo.html.renderButton(`<button class=\"k-button-filter-clear\">${encode(messages.clear)}</button>`) +\n                                                kendo.html.renderButton(`<button class=\"k-button-filter\">${encode(messages.filter)}</button>`, { themeColor: \"primary\" }) +\n                                            '</div>' +\n                                        '</div>' +\n                                    '</form>' +\n                                '</div>' +\n                            '</div>' +\n                        '</div>' : '') +\n                        MOVE_OPERATIONS_TEMPLATE(renderAll, messages) +\n                    '</div>' +\n                '</div>' +\n            '</div>';\n\n        var MOVE_OPERATIONS_TEMPLATE = (renderAll, messages) => '<div class=\"k-columnmenu-item-wrapper\">' +\n                            (renderAll ? '<div class=\"k-columnmenu-item k-item\" data-move=\"columns\">' +\n                                `${kendo.ui.icon(\"columns\")}${encode(messages.moveToColumns)}` +\n                            '</div>' : '') +\n                            (renderAll ? '<div class=\"k-columnmenu-item k-item\" data-move=\"rows\">' +\n                                `${kendo.ui.icon(\"rows\")}${encode(messages.moveToRows)}` +\n                            '</div>' : '') +\n                            '<div class=\"k-columnmenu-item k-item\" data-move=\"previous\">' +\n                                `${kendo.ui.icon(\"arrow-left\")}${encode(messages.movePrevious)}` +\n                            '</div>' +\n                            '<div class=\"k-columnmenu-item k-item\" data-move=\"next\">' +\n                                `${kendo.ui.icon(\"arrow-right\")}${encode(messages.moveNext)}` +\n                            '</div>' +\n                        '</div>';\n\n        var MENU_TEMPLATE_SORTABLE_PARTIAL = (messages, sortable, filterable) => {\n            var result = '';\n\n            if (sortable) {\n                result += '<li class=\"k-item k-menu-item k-sort-asc\">' +\n                '<span class=\"k-link k-menu-link\">' +\n                kendo.ui.icon(\"sort-asc-small\") +\n                `<span class=\"k-menu-link-text\">${encode(messages.sortAscending)}</span>` +\n                '</span>' +\n                '</li>' +\n                '<li class=\"k-item k-menu-item k-sort-desc\">' +\n                '<span class=\"k-link k-menu-link\">' +\n                kendo.ui.icon(\"sort-desc-small\") +\n                `<span class=\"k-menu-link-text\">${encode(messages.sortDescending)}</span>` +\n                '</span>' +\n                '</li>';\n\n                if (filterable) {\n                    result += '<li class=\"k-separator\"></li>';\n                }\n            }\n\n            return result;\n        };\n\n        var MENU_TEMPLATE_FILTERABLE_PARTIAL = (messages, filterable) => {\n            var result = '';\n\n            if (filterable) {\n                result += '<li class=\"k-item k-menu-item k-include-item\">' +\n                    '<span class=\"k-link k-menu-link\">' +\n                    kendo.ui.icon(\"filter\") +\n                    `<span class=\"k-menu-link-text\">${encode(messages.include)}</span>` +\n                    '</span>' +\n                    '</li>' +\n                    '<li class=\"k-separator\"></li>' +\n                    '<li class=\"k-item k-menu-item ' + FILTER_ITEM + '\">' +\n                    '<span class=\"k-link k-menu-link\">' +\n                    kendo.ui.icon(\"filter\") +\n                    `<span class=\"k-menu-link-text\">${encode(messages.filterFields)}</span>` +\n                    '</span>' +\n                    '<ul>' +\n                    '<li>' + LABELMENUTEMPLATE(messages) + '</li>' +\n                    '</ul>' +\n                    '</li>';\n            }\n\n            return result;\n        };\n\n        var MENUTEMPLATE = ({ messages, filterable, sortable }) => '<ul class=\"k-pivot-fieldmenu\">' +\n                            MENU_TEMPLATE_SORTABLE_PARTIAL(messages, sortable, filterable) +\n                            MENU_TEMPLATE_FILTERABLE_PARTIAL(messages, filterable) +\n                        '</ul>';\n\n        var WINDOWTEMPLATE = ({ messages }) => '<div class=\"k-popup-edit-form k-pivot-filter-window\"><div class=\"k-edit-form-container\">' +\n                                '<div class=\"k-treeview\"></div>' +\n                                '<div class=\"k-edit-buttons\">' +\n                                    '<a class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary k-button-ok\" href=\"#\">' +\n                                        '<span class=\"k-button-text\">' +\n                                            `${encode(messages.ok)}` +\n                                        '</span>' +\n                                    '</a>' +\n                                    '<a class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-button-cancel\" href=\"#\">' +\n                                        '<span class=\"k-button-text\">' +\n                                            `${encode(messages.cancel)}` +\n                                        '</span>' +\n                                    '</a>' +\n                            '</div></div>';\n\n        ui.plugin(PivotFieldMenu);\n        ui.plugin(PivotFieldMenuV2);\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}